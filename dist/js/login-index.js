$(function(){function checkUserName(e){var t=e.val(),n="";if(""==$.trim(t))n="邮箱或手机号码不能为空";else if(0<=t.indexOf("@")){/^([a-zA-Z0-9]+[-|_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)||(n="您输入的邮箱地址格式不正确")}else if(isNaN(t))n="您输入的手机号或邮箱不正确";else{/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|(14[0-9]{1}))+\d{8})$/.test(t)||(n="您输入的手机号码格式不正确")}return""==n||(e.parent().prev().css("color","#e5004b").text(n),!1)}function checkPwd(e){var t=e.val();return!!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/.test(t)||(e.parent().prev().prev().css("color","#e5004b").html("请输入6-16位字符,必须包含英文字母和数字"),!1)}function colorRandom(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}function verify(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random()),Math.floor(10*Math.random()),Math.floor(10*Math.random())]}function checkVerify(e){return Number(e.val())==Number(e.parent().next().html())}$(".rms p:nth-of-type(4)").next().css({background:colorRandom(),color:"#fff","letter-spacing":"10px","font-size":"18px","line-height":"40px","margin-left":"5px"}).html(verify().join("")),$(".login-header a").click(function(){$(".login").css({display:"none",left:"450px"}).next().css({display:"block"}).animate({left:"888px"}).parent().prev().find("span").text("欢迎注册")}),$(".register-header a").click(function(){$(".register").css({display:"none",left:"450px"}).prev().css({display:"block"}).animate({left:"888px"}).parent().prev().find("span").text("欢迎登录")}),$(".rms p:nth-of-type(2)").find("input").change(function(){checkUserName($(this))||console.log($(this).parent().prev())}),$(".rms p:nth-of-type(3)").find("input").change(function(){checkPwd($(this))||console.log($(this).parent().prev().prev())}),$(".rms p:nth-of-type(4)").find("input").change(function(){checkVerify($(this))&&console.log("true")}),$(".register-btn").click(function(){var username=$(this).siblings().find("p:nth-of-type(2)").find("input"),pwd=$(this).siblings().find("p:nth-of-type(3)").find("input"),code=$(this).siblings().find("p:nth-of-type(4)").find("input");if(checkPwd(pwd)&&checkUserName(username)&&checkVerify(code)){var userData={username:username.val(),password:pwd.val()},data=[{username:"15037663282",password:"smy123456"}];localStorage.setItem("userData",JSON.stringify(data));for(var flag=!0,udata=eval(localStorage.getItem("userData")),i=0;i<udata.length;i++)username.val()==data[i].username&&(username.parent().prev().css("color","#e5004b").text("该用户已存在请直接登录"),username.val(""),flag=!1);flag&&(udata.push(userData),localStorage.setItem("userData",JSON.stringify(udata)))}});var login_flag=!0;$(".slide").children().click(function(){console.log($(this));var e=$(this).parent().siblings().find("p:nth-of-type(2)").find("input");checkPwd($(this).parent().siblings().find("p:nth-of-type(3)").find("input"))&&checkUserName(e)?$(this).animate({left:"240px"}).parent().css({background:"green","text-align":"center",color:"#fff"}).text("验证通过"):login_flag=!1}),$(".log-btn").click(function(){var username=$(this).siblings().find("p:nth-of-type(2)").find("input"),pwd=$(this).siblings().find("p:nth-of-type(3)").find("input");if(login_flag)for(var data=eval(localStorage.getItem("userData")),i=0;i<data.length;i++)username.val()==data[i].username&&pwd.val()==data[i].password?(console.log(i),console.log("登录成功"),location.href="http://localhost:8080/index.html"):(username.parent().css("border","1px solid #e5004b").siblings().not("p:nth-of-type(1)").css("border","1px solid #e5004b"),username.parent().siblings().not("p:last-child").css("color","#e5004b").text("用户名或密码错误"));else alert("验证未通过，请检查用户名或密码是否有误")})});